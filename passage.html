<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passage Typing Practice | Typing Nova</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Variables */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #4cc9f0;
            --accent: #7209b7;
            --success: #4ade80;
            --error: #ef4444;
            --warning: #f59e0b;
            --dark-bg: #0f172a;
            --dark-surface: #1e293b;
            --dark-card: #334155;
            --text: #f1f5f9;
            --text-light: #cbd5e1;
            --text-muted: #94a3b8;
            --border: #475569;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.5);
            --correct-bg: rgba(74, 222, 128, 0.1);
            --incorrect-bg: rgba(239, 68, 68, 0.1);
            --current-bg: rgba(67, 97, 238, 0.15);
            --correct-border: rgba(74, 222, 128, 0.3);
            --incorrect-border: rgba(239, 68, 68, 0.3);
        }

        /* Base Styles */
        body {
            font-family: 'Inter', sans-serif;
            color: var(--text);
            background-color: var(--dark-bg);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        h1, h2, h3, h4 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            line-height: 1.3;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Inter', sans-serif;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px var(--shadow-hover);
        }

        .btn-secondary {
            background-color: var(--dark-card);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background-color: var(--dark-surface);
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .btn-danger {
            background-color: var(--error);
            color: var(--white);
        }

        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        /* Header */
        header {
            padding: 15px 0;
            background-color: var(--dark-surface);
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: var(--text-light);
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--secondary);
        }

        /* Top Status Bar */
        .status-bar {
            position: sticky;
            top: 0;
            background-color: var(--dark-surface);
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
            z-index: 100;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            align-items: center;
        }

        .status-item {
            text-align: center;
            padding: 10px;
            background-color: var(--dark-card);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .status-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .time-remaining {
            color: var(--secondary);
        }

        .gross-wpm {
            color: var(--primary);
        }

        .errors-count {
            color: var(--error);
        }

        .accuracy-percent {
            color: var(--success);
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 30px 0;
        }

        .page-title {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-title h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--text) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .page-title p {
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Passage Container */
        .passage-container {
            margin-bottom: 30px;
            background-color: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .passage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .passage-info {
            display: flex;
            gap: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .info-value {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .passage-content {
            font-size: 1.2rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Inter', sans-serif;
            color: var(--text);
            background-color: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        /* Character styling within passage */
        .char {
            padding: 2px 1px;
            border-radius: 3px;
            transition: all 0.1s;
        }

        .char.correct {
            background-color: var(--correct-bg);
            border-bottom: 2px solid var(--correct-border);
            color: var(--success);
        }

        .char.incorrect {
            background-color: var(--incorrect-bg);
            border-bottom: 2px solid var(--incorrect-border);
            color: var(--error);
            text-decoration: line-through;
        }

        .char.current {
            background-color: var(--current-bg);
            border-bottom: 2px solid var(--primary);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { background-color: var(--current-bg); }
            50% { background-color: rgba(67, 97, 238, 0.25); }
            100% { background-color: var(--current-bg); }
        }

        /* Typing Input Area */
        .typing-container {
            margin-bottom: 30px;
            background-color: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .typing-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .typing-area {
            width: 100%;
            min-height: 180px;
            font-size: 1.2rem;
            line-height: 1.8;
            padding: 20px;
            background-color: var(--dark-card);
            color: var(--text);
            border: 2px solid var(--border);
            border-radius: 8px;
            resize: vertical;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.3s;
        }

        .typing-area:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .typing-area.disabled {
            background-color: var(--dark-surface);
            cursor: not-allowed;
            opacity: 0.7;
        }

        .instructions {
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--text-muted);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .instruction-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .instruction-item i {
            font-size: 0.8rem;
        }

        /* Control Buttons */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        /* Results Section */
        .results-container {
            display: none;
            margin-bottom: 30px;
            background-color: var(--dark-surface);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .results-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--text);
        }

        .results-header p {
            color: var(--text-light);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            text-align: center;
            padding: 25px 15px;
            background-color: var(--dark-card);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 5px;
        }

        .result-label {
            font-size: 1rem;
            color: var(--text-muted);
        }

        .result-gross {
            border-top: 4px solid var(--primary);
        }

        .result-net {
            border-top: 4px solid var(--success);
        }

        .result-errors {
            border-top: 4px solid var(--error);
        }

        .result-accuracy {
            border-top: 4px solid var(--secondary);
        }

        .result-chars {
            border-top: 4px solid var(--accent);
        }

        .results-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        /* Timer Warning */
        .timer-warning {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: rgba(245, 158, 11, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: var(--warning);
        }

        /* Footer */
        footer {
            background-color: #0a0f1f;
            color: #f1f5f9;
            padding: 40px 0 25px;
            border-top: 1px solid var(--border);
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-logo {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-logo span {
            color: var(--secondary);
        }

        .footer-about {
            font-size: 0.9rem;
            color: var(--text-light);
            line-height: 1.7;
        }

        .footer-heading {
            font-size: 1.1rem;
            margin-bottom: 1.2rem;
            color: var(--white);
        }

        .footer-links li {
            margin-bottom: 0.7rem;
        }

        .footer-links a {
            color: var(--text-light);
            transition: color 0.2s;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: var(--secondary);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .status-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .passage-info {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .page-title h1 {
                font-size: 1.8rem;
            }
            
            .passage-header, .typing-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .controls, .results-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }

        @media (max-width: 576px) {
            .status-grid {
                grid-template-columns: 1fr;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .page-title h1 {
                font-size: 1.5rem;
            }
            
            .passage-content, .typing-area {
                font-size: 1rem;
                line-height: 1.6;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-keyboard"></i>
                Typing<span>Nova</span>
            </a>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="speed-test.html">Speed Test</a>
                <a href="passage-typing.html" class="active">Passage Typing</a>
                <a href="about.html">About</a>
            </nav>
        </div>
    </header>

    <!-- Top Status Bar -->
    <div class="status-bar">
        <div class="container status-grid">
            <div class="status-item">
                <div class="status-label">Time Remaining</div>
                <div class="status-value time-remaining" id="timeRemaining">07:00</div>
            </div>
            <div class="status-item">
                <div class="status-label">Gross Speed</div>
                <div class="status-value gross-wpm" id="grossWPM">0</div>
            </div>
            <div class="status-item">
                <div class="status-label">Errors</div>
                <div class="status-value errors-count" id="errorsCount">0</div>
            </div>
            <div class="status-item">
                <div class="status-label">Accuracy</div>
                <div class="status-value accuracy-percent" id="accuracyPercent">100%</div>
            </div>
            <div class="status-item">
                <button class="btn btn-danger" id="resetButton">
                    <i class="fas fa-redo"></i>
                    Reset Test
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Page Title -->
            <div class="page-title">
                <h1>7-Minute Passage Typing Practice</h1>
                <p>Practice typing full passages with realistic timing. Each passage contains approximately 350 words for 7 minutes of practice.</p>
            </div>

            <!-- Timer Warning -->
            <div class="timer-warning">
                <i class="fas fa-clock"></i>
                This is a 7-minute typing practice. Timer starts with your first keystroke.
            </div>

            <!-- Passage Display -->
            <div class="passage-container">
                <div class="passage-header">
                    <h2>Practice Passage</h2>
                    <div class="passage-info">
                        <div class="info-item">
                            <div class="info-label">Characters</div>
                            <div class="info-value" id="totalChars">0</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Words</div>
                            <div class="info-value" id="totalWords">0</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Duration</div>
                            <div class="info-value">7 minutes</div>
                        </div>
                    </div>
                </div>
                <div class="passage-content" id="passageDisplay">
                    Loading passage...
                </div>
            </div>

            <!-- Typing Input Area -->
            <div class="typing-container">
                <div class="typing-header">
                    <h2>Your Typing</h2>
                    <div class="info-item">
                        <div class="info-label">Current Position</div>
                        <div class="info-value" id="currentPosition">0 / 0</div>
                    </div>
                </div>
                <textarea 
                    class="typing-area" 
                    id="typingInput" 
                    placeholder="Start typing the passage above. The 7-minute timer will begin with your first keystroke."
                    rows="6"
                    spellcheck="false"
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                ></textarea>
                <div class="instructions">
                    <div class="instruction-item">
                        <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                        <span>Type character-by-character exactly as shown</span>
                    </div>
                    <div class="instruction-item">
                        <i class="fas fa-exclamation-triangle" style="color: var(--error);"></i>
                        <span>Errors are counted even if corrected</span>
                    </div>
                    <div class="instruction-item">
                        <i class="fas fa-clock" style="color: var(--secondary);"></i>
                        <span>7-minute timer starts with first keystroke</span>
                    </div>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="controls">
                <button class="btn btn-primary" id="startButton">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
                <button class="btn btn-secondary" id="newPassageButton">
                    <i class="fas fa-sync-alt"></i>
                    New Passage
                </button>
                <button class="btn btn-secondary" id="pauseButton" style="display: none;">
                    <i class="fas fa-pause"></i>
                    Pause
                </button>
            </div>

            <!-- Results Section -->
            <div class="results-container" id="resultsContainer">
                <div class="results-header">
                    <h2>Typing Practice Results</h2>
                    <p>Review your 7-minute typing performance</p>
                </div>
                <div class="results-grid">
                    <div class="result-card result-gross">
                        <div class="result-value" id="resultGrossWPM">0</div>
                        <div class="result-label">Gross Speed (WPM)</div>
                    </div>
                    <div class="result-card result-net">
                        <div class="result-value" id="resultNetWPM">0</div>
                        <div class="result-label">Net Speed (WPM)</div>
                    </div>
                    <div class="result-card result-errors">
                        <div class="result-value" id="resultErrors">0</div>
                        <div class="result-label">Total Errors</div>
                    </div>
                    <div class="result-card result-accuracy">
                        <div class="result-value" id="resultAccuracy">100%</div>
                        <div class="result-label">Accuracy</div>
                    </div>
                    <div class="result-card result-chars">
                        <div class="result-value" id="resultChars">0</div>
                        <div class="result-label">Characters Typed</div>
                    </div>
                </div>
                <div class="results-actions">
                    <button class="btn btn-primary" id="practiceAgainButton">
                        <i class="fas fa-redo"></i>
                        Practice Again
                    </button>
                    <button class="btn btn-secondary" id="newPracticeButton">
                        <i class="fas fa-sync-alt"></i>
                        New Passage
                    </button>
                </div>
            </div>

            <!-- AdSense Safe Area (After Results) -->
            <div class="ad-container" style="margin: 40px 0; text-align: center; color: var(--text-muted); font-size: 0.9rem; padding: 20px; background-color: var(--dark-surface); border-radius: 8px; border: 1px dashed var(--border);">
                <p>Advertisement Area</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">(This area is designed for AdSense ads. It appears only after completing a practice session.)</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about-section">
                    <div class="footer-logo">
                        <i class="fas fa-keyboard"></i>
                        Typing<span>Nova</span>
                    </div>
                    <p class="footer-about">Typing Nova provides a clean, professional environment for practicing and improving typing speed and accuracy through timed tests and passage typing.</p>
                </div>
                <div>
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="speed-test.html">Speed Test</a></li>
                        <li><a href="passage-typing.html">Passage Typing</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="footer-heading">Legal</h3>
                    <ul class="footer-links">
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="cookies.html">Cookie Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="footer-heading">Contact</h3>
                    <ul class="footer-links">
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="feedback.html">Feedback</a></li>
                        <li><a href="support.html">Support</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                © <span id="currentYear"></span> Typing Nova – All rights reserved
            </div>
        </div>
    </footer>

    <script>
        // Typing Practice Application with 7-minute format
        class PassageTypingPractice {
            constructor() {
                // DOM Elements
                this.passageDisplay = document.getElementById('passageDisplay');
                this.typingInput = document.getElementById('typingInput');
                this.timeRemaining = document.getElementById('timeRemaining');
                this.grossWPM = document.getElementById('grossWPM');
                this.errorsCount = document.getElementById('errorsCount');
                this.accuracyPercent = document.getElementById('accuracyPercent');
                this.totalChars = document.getElementById('totalChars');
                this.totalWords = document.getElementById('totalWords');
                this.currentPosition = document.getElementById('currentPosition');
                this.resetButton = document.getElementById('resetButton');
                this.startButton = document.getElementById('startButton');
                this.newPassageButton = document.getElementById('newPassageButton');
                this.pauseButton = document.getElementById('pauseButton');
                this.resultsContainer = document.getElementById('resultsContainer');
                this.resultGrossWPM = document.getElementById('resultGrossWPM');
                this.resultNetWPM = document.getElementById('resultNetWPM');
                this.resultErrors = document.getElementById('resultErrors');
                this.resultAccuracy = document.getElementById('resultAccuracy');
                this.resultChars = document.getElementById('resultChars');
                this.practiceAgainButton = document.getElementById('practiceAgainButton');
                this.newPracticeButton = document.getElementById('newPracticeButton');
                
                // State variables - 7 MINUTE FORMAT
                this.originalPassage = '';
                this.passageChars = [];
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.startTime = null;
                this.endTime = null;
                this.timerInterval = null;
                this.totalTime = 7 * 60; // 7 minutes in seconds
                this.timeLeft = this.totalTime;
                this.isRunning = false;
                this.isCompleted = false;
                this.isPaused = false;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap = new Map(); // Track errors by position
                
                // Sample passages database - 7 MINUTE PASSAGES (350 words ~ 1750 characters)
                this.passages = [
                    {
                        id: 1,
                        language: 'English',
                        title: 'Digital Transformation in Modern Society',
                        content: `Digital transformation has fundamentally changed how we live, work, and communicate. The shift from analog to digital technologies has created new opportunities while presenting unique challenges that require careful navigation in our increasingly connected world.

The internet, once a novel technology, has become an essential utility for billions worldwide. It enables instant communication across continents, access to vast amounts of information, and new forms of commerce that operate without physical boundaries. This connectivity has reshaped social interactions, business models, and even political movements.

Artificial intelligence and machine learning represent the next frontier of digital evolution. These technologies can analyze complex data patterns, automate routine tasks, and provide insights that were previously impossible to obtain. However, they also raise important questions about privacy, job displacement, and ethical considerations that society must address.

Remote work, accelerated by recent global events, demonstrates how digital tools can maintain productivity outside traditional office environments. Video conferencing, cloud collaboration platforms, and digital project management tools have enabled distributed teams to work effectively across time zones and geographical locations.

The environmental impact of digital technology represents a significant consideration. Data centers consume substantial energy, electronic waste continues to grow, and the constant upgrade cycle of devices contributes to resource depletion. Sustainable digital practices and responsible consumption are becoming increasingly important.

Digital literacy has evolved from a specialized skill to a fundamental requirement for participation in modern society. Understanding how to use technology effectively, evaluate online information critically, and protect personal data are essential competencies for navigating today's world. Educational systems worldwide are adapting to develop these skills from an early age.

The future of digital transformation will likely involve greater integration of virtual and physical realities, more sophisticated automation, and continued evolution of how we interact with technology. Balancing innovation with thoughtful consideration of social impacts will remain an ongoing challenge for individuals, organizations, and governments alike.`
                    },
                    {
                        id: 2,
                        language: 'English', 
                        title: 'The Science of Learning and Memory',
                        content: `Human learning and memory represent complex cognitive processes that enable us to acquire knowledge, develop skills, and navigate our environment effectively. Understanding these mechanisms provides valuable insights for education, personal development, and cognitive enhancement throughout our lives.

Memory formation involves multiple brain regions working in concert. The hippocampus plays a crucial role in forming new memories, while various cortical areas store long-term information. This distributed system allows for efficient processing and retrieval of vast amounts of information accumulated over a lifetime.

Neuroplasticity, the brain's ability to reorganize itself by forming new neural connections, continues throughout adulthood. This capacity enables learning new skills, recovering from injuries, and adapting to changing circumstances. Regular mental challenges and novel experiences help maintain this plasticity as we age.

Sleep plays an essential role in memory consolidation. During sleep, particularly during deep sleep and REM stages, the brain processes and organizes information acquired while awake. This consolidation strengthens neural connections and integrates new knowledge with existing memories, making sleep crucial for effective learning.

Different learning styles, while often discussed, may be less important than previously believed. Research suggests that matching teaching methods to supposed learning styles doesn't necessarily improve outcomes. Instead, varied instructional approaches and regular retrieval practice tend to benefit all learners regardless of their preferred modalities.

Spaced repetition represents one of the most effective learning techniques discovered. By reviewing information at gradually increasing intervals, this method takes advantage of the brain's forgetting curve to strengthen memories efficiently. Digital tools now make implementing spaced repetition easier than ever before.

Metacognition, or thinking about one's own thinking processes, enhances learning effectiveness. When learners monitor their understanding, identify gaps in knowledge, and adjust their strategies accordingly, they develop more durable and transferable knowledge. Teaching metacognitive skills has shown significant benefits across educational contexts.

Emotional states significantly influence learning and memory. Moderate stress can enhance focus and memory formation, while chronic stress typically impairs cognitive function. Creating positive learning environments that minimize unnecessary stress while maintaining appropriate challenge levels optimizes educational outcomes.

The relationship between physical activity and cognitive function continues to be explored. Regular exercise appears to support brain health through multiple mechanisms, including increased blood flow, reduced inflammation, and stimulation of neurogenesis. Incorporating movement into learning routines may provide cognitive benefits.

Technological tools offer new possibilities for enhancing learning experiences. Adaptive learning systems, virtual reality simulations, and collaborative online platforms create opportunities for personalized, engaging education. However, balancing screen time with offline activities remains important for overall cognitive health and development.`
                    },
                    {
                        id: 3,
                        language: 'English',
                        title: 'Sustainable Development and Environmental Stewardship',
                        content: `Sustainable development represents a crucial approach to meeting current human needs without compromising the ability of future generations to meet their own needs. This complex challenge requires balancing economic growth, social equity, and environmental protection across global, national, and local contexts.

Climate change presents one of the most significant challenges to sustainable development. Rising global temperatures, changing weather patterns, and increasing frequency of extreme events threaten ecosystems, food security, and human settlements worldwide. Addressing these changes requires coordinated international action and significant technological innovation.

Renewable energy technologies have advanced dramatically in recent decades. Solar, wind, and geothermal power now compete economically with fossil fuels in many regions, while energy storage solutions continue to improve. This transition toward cleaner energy sources represents a critical component of sustainable development strategies.

Circular economy principles aim to minimize waste and maximize resource efficiency. By designing products for durability, repairability, and recyclability, and by creating systems that recover materials at the end of products' useful lives, circular approaches reduce environmental impacts while creating economic opportunities.

Sustainable agriculture addresses the dual challenges of feeding a growing global population while protecting natural resources. Techniques like precision farming, agroforestry, and regenerative practices can increase productivity while improving soil health, conserving water, and enhancing biodiversity.

Urban sustainability focuses on creating cities that are livable, efficient, and resilient. Compact development, efficient public transportation, green building standards, and accessible green spaces contribute to urban environments that support both human well-being and ecological health.

Corporate sustainability has evolved from a niche concern to a mainstream business consideration. Companies increasingly recognize that environmental and social responsibility can drive innovation, reduce risks, and create long-term value for shareholders and stakeholders alike.

Individual actions contribute significantly to collective sustainability efforts. Conscious consumption, energy conservation, sustainable transportation choices, and waste reduction represent ways that individuals can support broader environmental goals while often saving money and improving personal well-being.

Education plays a fundamental role in advancing sustainable development. By fostering environmental literacy, critical thinking about complex systems, and problem-solving skills, education empowers individuals and communities to participate meaningfully in creating sustainable futures.

International cooperation remains essential for addressing transboundary environmental challenges. Climate agreements, biodiversity conventions, and sustainable development goals provide frameworks for coordinated action, though implementation often requires adapting global commitments to local contexts and capacities.

Technological innovation continues to provide tools for sustainability challenges. From advanced materials that reduce resource consumption to monitoring systems that track environmental conditions, technology offers potential solutions, though their development and deployment require careful consideration of unintended consequences.

The concept of planetary boundaries identifies critical Earth system processes that, if pushed beyond certain limits, could lead to irreversible environmental changes. Respecting these boundaries while meeting human needs represents a fundamental challenge for sustainable development in the coming decades.`
                    }
                ];
                
                // Initialize the application
                this.init();
            }
            
            init() {
                // Set current year in footer
                document.getElementById('currentYear').textContent = new Date().getFullYear();
                
                // Load initial passage
                this.loadRandomPassage();
                
                // Event listeners
                this.typingInput.addEventListener('input', this.handleTyping.bind(this));
                this.typingInput.addEventListener('keydown', this.handleKeyDown.bind(this));
                this.typingInput.addEventListener('paste', (e) => e.preventDefault());
                this.typingInput.addEventListener('copy', (e) => e.preventDefault());
                this.typingInput.addEventListener('cut', (e) => e.preventDefault());
                
                this.startButton.addEventListener('click', this.startPractice.bind(this));
                this.resetButton.addEventListener('click', this.resetPractice.bind(this));
                this.newPassageButton.addEventListener('click', () => this.loadRandomPassage());
                this.pauseButton.addEventListener('click', this.togglePause.bind(this));
                this.practiceAgainButton.addEventListener('click', this.resetPractice.bind(this));
                this.newPracticeButton.addEventListener('click', () => {
                    this.loadRandomPassage();
                    this.resetPractice();
                });
                
                // Set initial state
                this.updateStatus();
                this.updatePassageDisplay();
            }
            
            loadRandomPassage() {
                // Select a random passage
                const randomIndex = Math.floor(Math.random() * this.passages.length);
                const passage = this.passages[randomIndex];
                
                this.originalPassage = passage.content;
                this.passageChars = this.originalPassage.split('');
                
                // Calculate words (approximate) - should be ~350 words
                const words = this.originalPassage.trim().split(/\s+/).length;
                
                // Update display
                this.totalChars.textContent = this.originalPassage.length;
                this.totalWords.textContent = words;
                this.currentPosition.textContent = `0 / ${this.originalPassage.length}`;
                
                // Reset typing state
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap.clear();
                
                this.updatePassageDisplay();
                this.updateStatus();
                
                // Clear typing input
                this.typingInput.value = '';
                this.typingInput.disabled = false;
                this.typingInput.classList.remove('disabled');
                this.typingInput.focus();
                
                // Hide results
                this.resultsContainer.classList.remove('active');
                
                // Reset timer to 7 minutes
                this.resetTimer();
            }
            
            updatePassageDisplay() {
                let displayHTML = '';
                
                for (let i = 0; i < this.passageChars.length; i++) {
                    let charClass = '';
                    let charContent = this.passageChars[i];
                    
                    // Handle special characters for display
                    if (charContent === ' ') {
                        charContent = '&nbsp;';
                    } else if (charContent === '\n') {
                        charContent = '<br>';
                    } else if (charContent === '\t') {
                        charContent = '&nbsp;&nbsp;&nbsp;&nbsp;';
                    }
                    
                    if (i < this.currentPassageIndex) {
                        // Already typed characters
                        if (this.errorMap.has(i)) {
                            charClass = 'incorrect';
                        } else {
                            charClass = 'correct';
                        }
                    } else if (i === this.currentPassageIndex) {
                        // Current character
                        charClass = 'current';
                    }
                    
                    displayHTML += `<span class="char ${charClass}">${charContent}</span>`;
                }
                
                this.passageDisplay.innerHTML = displayHTML;
            }
            
            handleTyping(e) {
                if (this.isCompleted || this.isPaused) return;
                
                const input = this.typingInput.value;
                const inputLength = input.length;
                
                // Start timer on first keystroke
                if (!this.isRunning && inputLength > 0) {
                    this.startTimer();
                }
                
                // Check if user is trying to type beyond current position
                if (inputLength > this.currentPassageIndex + 1) {
                    // User is trying to type ahead - revert to correct position
                    this.typingInput.value = input.substring(0, this.currentPassageIndex);
                    return;
                }
                
                // Handle backspace
                if (inputLength < this.currentPassageIndex) {
                    // User pressed backspace - move cursor back
                    this.currentPassageIndex = inputLength;
                    this.updatePassageDisplay();
                    this.updateStatus();
                    return;
                }
                
                // Handle new character
                if (inputLength === this.currentPassageIndex + 1) {
                    const typedChar = input[this.currentPassageIndex];
                    const expectedChar = this.passageChars[this.currentPassageIndex];
                    
                    // Strict MSCEIA character comparison
                    let isCorrect = typedChar === expectedChar;
                    
                    // Special handling for Enter key (already captured in keydown)
                    // But we need to handle newlines from paste or other sources
                    if (typedChar === '\n' && expectedChar !== '\n') {
                        isCorrect = false;
                    }
                    
                    // Update counts
                    this.totalTypedChars++;
                    
                    if (isCorrect) {
                        this.correctChars++;
                        // Remove error if previously marked at this position
                        if (this.errorMap.has(this.currentPassageIndex)) {
                            this.errorMap.delete(this.currentPassageIndex);
                        }
                    } else {
                        this.errors++;
                        // Mark this position as having an error
                        this.errorMap.set(this.currentPassageIndex, {
                            typed: typedChar,
                            expected: expectedChar,
                            time: Date.now()
                        });
                    }
                    
                    this.currentPassageIndex++;
                    
                    // Check if passage is completed
                    if (this.currentPassageIndex >= this.passageChars.length) {
                        this.completePractice();
                    }
                    
                    this.updatePassageDisplay();
                    this.updateStatus();
                }
            }
            
            handleKeyDown(e) {
                // Prevent default for tab key to avoid leaving textarea
                if (e.key === 'Tab') {
                    e.preventDefault();
                    return;
                }
                
                // Handle Enter key - only allow at correct positions
                if (e.key === 'Enter') {
                    if (this.currentPassageIndex < this.passageChars.length) {
                        const expectedChar = this.passageChars[this.currentPassageIndex];
                        
                        if (expectedChar !== '\n') {
                            e.preventDefault();
                            return;
                        }
                    }
                }
                
                // Allow backspace, delete, arrow keys, etc.
                const allowedKeys = [
                    'Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 
                    'ArrowUp', 'ArrowDown', 'Home', 'End'
                ];
                
                if (allowedKeys.includes(e.key)) {
                    return;
                }
                
                // Prevent typing if practice is completed
                if (this.isCompleted || this.isPaused) {
                    e.preventDefault();
                    return;
                }
            }
            
            startTimer() {
                if (this.isRunning) return;
                
                this.isRunning = true;
                this.startTime = Date.now();
                this.startButton.style.display = 'none';
                this.pauseButton.style.display = 'flex';
                
                this.timerInterval = setInterval(() => {
                    if (!this.isPaused) {
                        this.timeLeft--;
                        
                        if (this.timeLeft <= 0) {
                            this.timeLeft = 0;
                            this.completePractice();
                        }
                        
                        this.updateTimerDisplay();
                        this.updateStatus();
                    }
                }, 1000);
            }
            
            updateTimerDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                
                this.timeRemaining.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            resetTimer() {
                clearInterval(this.timerInterval);
                this.isRunning = false;
                this.isPaused = false;
                this.timeLeft = this.totalTime; // 7 minutes
                this.updateTimerDisplay();
                this.startButton.style.display = 'flex';
                this.pauseButton.style.display = 'none';
                this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
            }
            
            togglePause() {
                if (!this.isRunning) return;
                
                this.isPaused = !this.isPaused;
                
                if (this.isPaused) {
                    this.pauseButton.innerHTML = '<i class="fas fa-play"></i> Resume';
                    this.typingInput.disabled = true;
                    this.typingInput.classList.add('disabled');
                } else {
                    this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
                    this.typingInput.disabled = false;
                    this.typingInput.classList.remove('disabled');
                    this.typingInput.focus();
                }
            }
            
            updateStatus() {
                // Calculate elapsed time in minutes
                const elapsedMinutes = this.isRunning ? 
                    ((Date.now() - this.startTime) / 1000 / 60) : 0;
                
                // Calculate Gross WPM (MSCEIA formula: 1 word = 5 characters)
                const grossWPM = elapsedMinutes > 0 ? 
                    (this.totalTypedChars / 5) / elapsedMinutes : 0;
                
                // Calculate Net WPM (Gross WPM - errors per minute)
                const errorsPerMinute = elapsedMinutes > 0 ? this.errors / elapsedMinutes : 0;
                let netWPM = grossWPM - errorsPerMinute;
                netWPM = netWPM < 0 ? 0 : netWPM;
                
                // Calculate Accuracy
                const accuracy = this.totalTypedChars > 0 ? 
                    ((this.totalTypedChars - this.errors) / this.totalTypedChars) * 100 : 100;
                
                // Update status bar
                this.grossWPM.textContent = Math.round(grossWPM);
                this.errorsCount.textContent = this.errors;
                this.accuracyPercent.textContent = `${Math.min(100, Math.round(accuracy))}%`;
                this.currentPosition.textContent = `${this.currentPassageIndex} / ${this.passageChars.length}`;
            }
            
            completePractice() {
                clearInterval(this.timerInterval);
                this.isRunning = false;
                this.isCompleted = true;
                
                // Disable typing input
                this.typingInput.disabled = true;
                this.typingInput.classList.add('disabled');
                
                // Calculate final results
                const elapsedMinutes = this.startTime ? 
                    ((Date.now() - this.startTime) / 1000 / 60) : 0.01; // Avoid division by zero
                
                // Final Gross WPM
                const finalGrossWPM = (this.totalTypedChars / 5) / elapsedMinutes;
                
                // Final Net WPM (MSCEIA formula)
                const errorsPerMinute = this.errors / elapsedMinutes;
                let finalNetWPM = finalGrossWPM - errorsPerMinute;
                finalNetWPM = finalNetWPM < 0 ? 0 : finalNetWPM;
                
                // Final Accuracy
                const finalAccuracy = this.totalTypedChars > 0 ? 
                    ((this.totalTypedChars - this.errors) / this.totalTypedChars) * 100 : 0;
                
                // Update results display
                this.resultGrossWPM.textContent = Math.round(finalGrossWPM);
                this.resultNetWPM.textContent = Math.round(finalNetWPM);
                this.resultErrors.textContent = this.errors;
                this.resultAccuracy.textContent = `${Math.min(100, Math.round(finalAccuracy))}%`;
                this.resultChars.textContent = this.totalTypedChars;
                
                // Show results section
                this.resultsContainer.classList.add('active');
                
                // Scroll to results
                setTimeout(() => {
                    this.resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 500);
            }
            
            resetPractice() {
                // Reset all state
                clearInterval(this.timerInterval);
                
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.startTime = null;
                this.endTime = null;
                this.isRunning = false;
                this.isCompleted = false;
                this.isPaused = false;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap.clear();
                this.timeLeft = this.totalTime; // Reset to 7 minutes
                
                // Reset UI
                this.typingInput.value = '';
                this.typingInput.disabled = false;
                this.typingInput.classList.remove('disabled');
                this.typingInput.focus();
                
                this.startButton.style.display = 'flex';
                this.pauseButton.style.display = 'none';
                this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
                
                this.resultsContainer.classList.remove('active');
                
                this.updatePassageDisplay();
                this.updateTimerDisplay();
                this.updateStatus();
            }
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            const typingPractice = new PassageTypingPractice();
            
            // Make it available globally for debugging if needed
            window.typingPractice = typingPractice;
        });
    </script>
</body>
</html>
