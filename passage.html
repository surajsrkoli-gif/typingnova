<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passage Typing Practice | Typing Nova</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Variables - MSCEIA Style */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #3b82f6;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --dark-bg: #111827;
            --dark-surface: #1f2937;
            --dark-card: #374151;
            --text: #f9fafb;
            --text-light: #d1d5db;
            --text-muted: #9ca3af;
            --border: #4b5563;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.25);
            --shadow-hover: rgba(0, 0, 0, 0.35);
            --correct-bg: rgba(16, 185, 129, 0.15);
            --incorrect-bg: rgba(239, 68, 68, 0.15);
            --current-bg: rgba(37, 99, 235, 0.2);
            --correct-border: rgba(16, 185, 129, 0.3);
            --incorrect-border: rgba(239, 68, 68, 0.3);
            --timer-red: #dc2626;
            --timer-yellow: #d97706;
            --timer-green: #059669;
        }

        /* Base Styles */
        body {
            font-family: 'Inter', sans-serif;
            color: var(--text);
            background-color: var(--dark-bg);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 20px;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-family: 'Inter', sans-serif;
            gap: 6px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn-secondary {
            background-color: var(--dark-card);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background-color: var(--dark-surface);
            transform: translateY(-1px);
        }

        .btn-danger {
            background-color: var(--error);
            color: var(--white);
        }

        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-1px);
        }

        /* Header - MSCEIA Style */
        header {
            padding: 12px 0;
            background-color: var(--dark-surface);
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo span {
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 1.2rem;
        }

        .nav-links a {
            color: var(--text-light);
            font-weight: 500;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        /* Top Status Bar - MSCEIA Style */
        .status-bar {
            position: sticky;
            top: 0;
            background-color: var(--dark-surface);
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            z-index: 100;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .status-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .status-right {
            display: flex;
            gap: 15px;
        }

        .status-item {
            display: flex;
            flex-direction: column;
        }

        .status-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 2px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-value {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .time-remaining {
            color: var(--timer-green);
            font-family: 'Courier New', monospace;
            font-weight: 700;
        }

        .gross-wpm {
            color: var(--primary);
        }

        .errors-count {
            color: var(--error);
        }

        .accuracy-percent {
            color: var(--success);
        }

        /* Main Content - Side by Side Layout */
        main {
            flex: 1;
            padding: 20px 0;
        }

        .page-title {
            text-align: center;
            margin-bottom: 20px;
        }

        .page-title h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--text);
            font-weight: 600;
        }

        .page-title p {
            color: var(--text-light);
            font-size: 0.95rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Two Column Layout - MSCEIA Style */
        .typing-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: 65vh;
            min-height: 500px;
        }

        .passage-column, .typing-column {
            display: flex;
            flex-direction: column;
            background-color: var(--dark-surface);
            border-radius: 8px;
            border: 1px solid var(--border);
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .column-header {
            padding: 12px 20px;
            background-color: var(--dark-card);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .column-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text);
        }

        .column-info {
            display: flex;
            gap: 15px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .info-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Passage Display Area - Left Side */
        .passage-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            font-size: 1.05rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text);
            background-color: var(--dark-surface);
            font-family: 'Inter', sans-serif;
        }

        /* Character styling within passage */
        .char {
            padding: 1px 0;
            border-radius: 2px;
            transition: all 0.1s;
            position: relative;
        }

        .char.correct {
            background-color: var(--correct-bg);
            color: var(--success);
        }

        .char.incorrect {
            background-color: var(--incorrect-bg);
            color: var(--error);
            text-decoration: line-through;
        }

        .char.current {
            background-color: var(--current-bg);
            border-bottom: 2px solid var(--primary);
            animation: pulse 1.5s infinite;
        }

        .char.current::after {
            content: '|';
            position: absolute;
            right: -2px;
            color: var(--primary);
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @keyframes pulse {
            0% { background-color: var(--current-bg); }
            50% { background-color: rgba(37, 99, 235, 0.3); }
            100% { background-color: var(--current-bg); }
        }

        /* Typing Input Area - Right Side */
        .typing-area {
            flex: 1;
            width: 100%;
            padding: 20px;
            background-color: var(--dark-card);
            color: var(--text);
            border: none;
            resize: none;
            font-size: 1.05rem;
            line-height: 1.7;
            font-family: 'Inter', sans-serif;
            overflow-y: auto;
            outline: none;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .typing-area:focus {
            outline: none;
            box-shadow: inset 0 0 0 2px var(--primary);
        }

        .typing-area.disabled {
            background-color: var(--dark-surface);
            cursor: not-allowed;
            opacity: 0.7;
        }

        .typing-area::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        /* Control Buttons */
        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
        }

        /* Instructions */
        .instructions {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
            padding: 12px;
            background-color: var(--dark-surface);
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .instruction-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .instruction-item i {
            font-size: 0.8rem;
        }

        .instruction-item .key {
            background-color: var(--dark-card);
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid var(--border);
            font-family: monospace;
            font-size: 0.8rem;
        }

        /* Results Section */
        .results-container {
            display: none;
            margin: 25px 0;
            background-color: var(--dark-surface);
            border-radius: 8px;
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .results-container.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .results-header h2 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: var(--text);
            font-weight: 600;
        }

        .results-header p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .result-card {
            text-align: center;
            padding: 20px 15px;
            background-color: var(--dark-card);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .result-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .result-gross {
            border-top: 3px solid var(--primary);
        }

        .result-net {
            border-top: 3px solid var(--success);
        }

        .result-errors {
            border-top: 3px solid var(--error);
        }

        .result-accuracy {
            border-top: 3px solid var(--secondary);
        }

        .result-chars {
            border-top: 3px solid var(--accent);
        }

        .results-actions {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        /* Footer */
        footer {
            background-color: #0f172a;
            color: #f1f5f9;
            padding: 30px 0 20px;
            border-top: 1px solid var(--border);
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .footer-logo {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .footer-logo span {
            color: var(--primary);
        }

        .footer-about {
            font-size: 0.85rem;
            color: var(--text-light);
            line-height: 1.6;
        }

        .footer-heading {
            font-size: 1rem;
            margin-bottom: 1rem;
            color: var(--white);
        }

        .footer-links li {
            margin-bottom: 0.6rem;
        }

        .footer-links a {
            color: var(--text-light);
            transition: color 0.2s;
            font-size: 0.85rem;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 1.2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .typing-container {
                height: 60vh;
            }
        }

        @media (max-width: 992px) {
            .typing-container {
                grid-template-columns: 1fr;
                height: auto;
                min-height: 800px;
            }
            
            .passage-column, .typing-column {
                height: 400px;
            }
            
            .status-content {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .status-right {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-links {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .status-left, .status-right {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .status-item {
                min-width: 80px;
            }
            
            .page-title h1 {
                font-size: 1.5rem;
            }
            
            .column-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .column-info {
                width: 100%;
                justify-content: space-between;
            }
            
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .controls, .results-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 280px;
            }
        }

        @media (max-width: 576px) {
            .typing-container {
                min-height: 700px;
            }
            
            .passage-column, .typing-column {
                height: 350px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .page-title h1 {
                font-size: 1.3rem;
            }
            
            .passage-content, .typing-area {
                font-size: 1rem;
                line-height: 1.6;
                padding: 15px;
            }
            
            .status-value {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-keyboard"></i>
                Typing<span>Nova</span>
            </a>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="speed-test.html">Speed Test</a>
                <a href="passage-typing.html" class="active">Passage Typing</a>
                <a href="about.html">About</a>
            </nav>
        </div>
    </header>

    <!-- Top Status Bar -->
    <div class="status-bar">
        <div class="container status-content">
            <div class="status-left">
                <div class="status-item">
                    <div class="status-label">Time Remaining</div>
                    <div class="status-value time-remaining" id="timeRemaining">07:00</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Current Position</div>
                    <div class="status-value" id="currentPosition">0 / 0</div>
                </div>
            </div>
            <div class="status-right">
                <div class="status-item">
                    <div class="status-label">Gross WPM</div>
                    <div class="status-value gross-wpm" id="grossWPM">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Errors</div>
                    <div class="status-value errors-count" id="errorsCount">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Accuracy</div>
                    <div class="status-value accuracy-percent" id="accuracyPercent">100%</div>
                </div>
                <button class="btn btn-danger" id="resetButton">
                    <i class="fas fa-redo"></i>
                    Reset
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Page Title -->
            <div class="page-title">
                <h1>7-Minute Passage Typing Practice</h1>
                <p>Type the passage shown on the left side in the typing area on the right side. Timer starts with your first keystroke.</p>
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <div class="instruction-item">
                    <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                    <span>Type exactly as shown, character by character</span>
                </div>
                <div class="instruction-item">
                    <i class="fas fa-exclamation-triangle" style="color: var(--error);"></i>
                    <span>Errors counted even if corrected</span>
                </div>
                <div class="instruction-item">
                    <i class="fas fa-clock" style="color: var(--success);"></i>
                    <span>7-minute timer | <span class="key">Tab</span> to switch focus</span>
                </div>
            </div>

            <!-- Two Column Layout -->
            <div class="typing-container">
                <!-- Left Column: Passage Display -->
                <div class="passage-column">
                    <div class="column-header">
                        <div class="column-title">Passage to Type</div>
                        <div class="column-info">
                            <div class="info-item">
                                <div class="info-label">Words</div>
                                <div class="info-value" id="totalWords">0</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Chars</div>
                                <div class="info-value" id="totalChars">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="passage-content" id="passageDisplay">
                        Loading passage...
                    </div>
                </div>

                <!-- Right Column: Typing Area -->
                <div class="typing-column">
                    <div class="column-header">
                        <div class="column-title">Your Typing</div>
                        <div class="column-info">
                            <div class="info-item">
                                <div class="info-label">Progress</div>
                                <div class="info-value" id="progressPercent">0%</div>
                            </div>
                            <button class="btn btn-secondary btn-small" id="focusTypingBtn">
                                <i class="fas fa-mouse-pointer"></i>
                                Focus Here
                            </button>
                        </div>
                    </div>
                    <textarea 
                        class="typing-area" 
                        id="typingInput" 
                        placeholder="Start typing here. The 7-minute timer will begin with your first keystroke. Press Tab to switch between passage and typing area."
                        spellcheck="false"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                    ></textarea>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="controls">
                <button class="btn btn-primary" id="startButton">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
                <button class="btn btn-secondary" id="newPassageButton">
                    <i class="fas fa-sync-alt"></i>
                    New Passage
                </button>
                <button class="btn btn-secondary" id="pauseButton" style="display: none;">
                    <i class="fas fa-pause"></i>
                    Pause
                </button>
            </div>

            <!-- Results Section -->
            <div class="results-container" id="resultsContainer">
                <div class="results-header">
                    <h2>Typing Practice Results</h2>
                    <p>Your 7-minute typing practice results</p>
                </div>
                <div class="results-grid">
                    <div class="result-card result-gross">
                        <div class="result-value" id="resultGrossWPM">0</div>
                        <div class="result-label">Gross Speed (WPM)</div>
                    </div>
                    <div class="result-card result-net">
                        <div class="result-value" id="resultNetWPM">0</div>
                        <div class="result-label">Net Speed (WPM)</div>
                    </div>
                    <div class="result-card result-errors">
                        <div class="result-value" id="resultErrors">0</div>
                        <div class="result-label">Total Errors</div>
                    </div>
                    <div class="result-card result-accuracy">
                        <div class="result-value" id="resultAccuracy">100%</div>
                        <div class="result-label">Accuracy</div>
                    </div>
                    <div class="result-card result-chars">
                        <div class="result-value" id="resultChars">0</div>
                        <div class="result-label">Characters Typed</div>
                    </div>
                </div>
                <div class="results-actions">
                    <button class="btn btn-primary" id="practiceAgainButton">
                        <i class="fas fa-redo"></i>
                        Practice Again
                    </button>
                    <button class="btn btn-secondary" id="newPracticeButton">
                        <i class="fas fa-sync-alt"></i>
                        New Passage
                    </button>
                </div>
            </div>

            <!-- AdSense Safe Area -->
            <div class="ad-container" style="margin: 30px 0; text-align: center; color: var(--text-muted); font-size: 0.85rem; padding: 15px; background-color: var(--dark-surface); border-radius: 6px; border: 1px dashed var(--border);">
                <p>Advertisement Area</p>
                <p style="margin-top: 8px; font-size: 0.75rem;">This area is designed for AdSense ads. It appears only after completing a practice session.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about-section">
                    <div class="footer-logo">
                        <i class="fas fa-keyboard"></i>
                        Typing<span>Nova</span>
                    </div>
                    <p class="footer-about">Typing Nova provides a professional environment for practicing typing speed and accuracy through timed tests and passage typing.</p>
                </div>
                <div>
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="speed-test.html">Speed Test</a></li>
                        <li><a href="passage-typing.html">Passage Typing</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="footer-heading">Legal</h3>
                    <ul class="footer-links">
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="cookies.html">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                © <span id="currentYear"></span> Typing Nova – All rights reserved
            </div>
        </div>
    </footer>

    <!-- Font Awesome Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

    <script>
        // Typing Practice Application with Side-by-Side Layout
        class PassageTypingPractice {
            constructor() {
                // DOM Elements
                this.passageDisplay = document.getElementById('passageDisplay');
                this.typingInput = document.getElementById('typingInput');
                this.timeRemaining = document.getElementById('timeRemaining');
                this.grossWPM = document.getElementById('grossWPM');
                this.errorsCount = document.getElementById('errorsCount');
                this.accuracyPercent = document.getElementById('accuracyPercent');
                this.totalChars = document.getElementById('totalChars');
                this.totalWords = document.getElementById('totalWords');
                this.currentPosition = document.getElementById('currentPosition');
                this.progressPercent = document.getElementById('progressPercent');
                this.resetButton = document.getElementById('resetButton');
                this.startButton = document.getElementById('startButton');
                this.newPassageButton = document.getElementById('newPassageButton');
                this.pauseButton = document.getElementById('pauseButton');
                this.focusTypingBtn = document.getElementById('focusTypingBtn');
                this.resultsContainer = document.getElementById('resultsContainer');
                this.resultGrossWPM = document.getElementById('resultGrossWPM');
                this.resultNetWPM = document.getElementById('resultNetWPM');
                this.resultErrors = document.getElementById('resultErrors');
                this.resultAccuracy = document.getElementById('resultAccuracy');
                this.resultChars = document.getElementById('resultChars');
                this.practiceAgainButton = document.getElementById('practiceAgainButton');
                this.newPracticeButton = document.getElementById('newPracticeButton');
                
                // State variables - 7 MINUTE FORMAT
                this.originalPassage = '';
                this.passageChars = [];
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.startTime = null;
                this.endTime = null;
                this.timerInterval = null;
                this.totalTime = 7 * 60; // 7 minutes in seconds
                this.timeLeft = this.totalTime;
                this.isRunning = false;
                this.isCompleted = false;
                this.isPaused = false;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap = new Map();
                
                // Passages database - 7 MINUTE PASSAGES (~350 words each)
                this.passages = [
                    `The rapid advancement of digital technology has fundamentally transformed how we communicate, work, and access information in contemporary society. This digital revolution, while offering unprecedented convenience and connectivity, also presents complex challenges that require thoughtful navigation and adaptation.

Internet connectivity has evolved from a luxury to an essential utility, enabling instant communication across geographical boundaries and providing access to vast repositories of knowledge. This global network supports diverse applications ranging from e-commerce and remote education to telemedicine and digital governance, reshaping traditional systems and creating new opportunities.

Artificial intelligence and machine learning represent significant milestones in technological progress, offering capabilities for data analysis, pattern recognition, and automation that were previously unimaginable. These technologies power recommendation systems, language translation tools, and predictive analytics while raising important questions about ethics, privacy, and the future of employment.

The shift toward remote work arrangements, accelerated by recent global developments, demonstrates the viability of distributed teams and virtual collaboration. Video conferencing platforms, cloud-based productivity tools, and digital project management systems have enabled organizations to maintain operations while offering employees greater flexibility in work arrangements.

Environmental sustainability considerations have gained prominence in discussions about technology's future. The energy consumption of data centers, electronic waste management, and the resource intensity of device manufacturing require innovative solutions and responsible consumption patterns to minimize ecological impacts.

Digital literacy has become an essential skill set for effective participation in modern society. The ability to navigate online platforms, evaluate digital information critically, protect personal data, and utilize technology productively represents fundamental competencies that educational systems worldwide are increasingly prioritizing.

The integration of virtual and augmented reality technologies offers immersive experiences with applications in education, training, entertainment, and design. These technologies create simulated environments that can enhance learning, facilitate remote collaboration, and provide innovative solutions to complex problems.

Cybersecurity concerns have grown alongside technological adoption, with protecting digital infrastructure and personal information becoming increasingly important. Robust security measures, user awareness, and ethical considerations in data handling are essential components of responsible technology use.

The democratization of information through digital platforms has empowered individuals and communities while also challenging traditional media structures. Social media networks, blogging platforms, and content sharing sites have created new avenues for expression, organization, and information dissemination.

Future technological developments will likely continue reshaping social, economic, and cultural landscapes. Emerging fields like quantum computing, biotechnology integration with digital systems, and advanced robotics promise further transformation while demanding careful consideration of their societal implications and ethical dimensions.`,

                    `Effective communication represents a fundamental human capacity that enables the exchange of ideas, information, and emotions across diverse contexts and cultures. This complex process involves not only verbal expression but also nonverbal cues, listening skills, and contextual understanding that collectively facilitate meaningful interaction.

Language development begins in early childhood and continues throughout the lifespan, reflecting both biological predisposition and environmental influence. The acquisition of vocabulary, grammatical structures, and pragmatic skills enables increasingly sophisticated expression and comprehension, forming the foundation for cognitive development and social integration.

Written communication has evolved through various mediums from stone carvings and parchment to digital text, each format influencing how ideas are structured, preserved, and disseminated. The transition to digital writing has introduced new conventions while maintaining core principles of clarity, coherence, and audience consideration.

Professional communication in organizational settings requires specific skills including formal report writing, presentation delivery, meeting facilitation, and digital correspondence. These competencies support coordination, decision-making, and relationship building within and between organizations across various sectors and industries.

Intercultural communication addresses the challenges and opportunities of exchanging messages across cultural boundaries. Understanding cultural variations in communication styles, nonverbal behaviors, and contextual expectations enhances effectiveness in global interactions and reduces misunderstandings in diverse settings.

Nonverbal communication encompasses facial expressions, gestures, posture, eye contact, and vocal qualities that complement or sometimes contradict verbal messages. These cues provide additional layers of meaning and emotional context, often operating at subconscious levels while significantly influencing interpersonal dynamics.

Listening represents an active process involving attention, interpretation, and response that goes beyond merely hearing words. Effective listening requires concentration, empathy, and the suspension of judgment to fully comprehend messages and demonstrate respect for speakers.

Digital communication tools including email, instant messaging, and video conferencing have created new channels for interaction with distinct conventions and expectations. These platforms offer efficiency and accessibility while sometimes lacking the richness of face-to-face communication and requiring adapted skills for optimal use.

Persuasive communication involves crafting messages to influence attitudes, beliefs, or behaviors through logical argument, emotional appeal, and credibility establishment. This skill finds application in marketing, leadership, advocacy, and everyday situations where influencing outcomes is desirable.

Communication barriers including language differences, cultural misunderstandings, emotional interference, and technological limitations can impede effective message exchange. Identifying and addressing these barriers through clarification, adaptation, and patience enhances communication effectiveness across various contexts.

The future of communication will likely involve continued technological innovation, evolving social norms, and perhaps new forms of expression yet to be developed. Maintaining core principles of clarity, empathy, and ethical consideration while adapting to changing circumstances will remain essential for meaningful human connection.`,

                    `Critical thinking represents a disciplined process of actively analyzing, evaluating, and synthesizing information to form reasoned judgments and make informed decisions. This cognitive skill set enables individuals to navigate complex information environments, solve problems effectively, and approach challenges with intellectual rigor and objectivity.

The foundation of critical thinking involves recognizing assumptions, both explicit and implicit, that underlie arguments, beliefs, and information presentations. Identifying these foundational elements allows for more thorough examination of their validity, relevance, and potential biases before accepting conclusions or making determinations.

Logical reasoning requires understanding different types of arguments including deductive, inductive, and abductive approaches, each with distinct structures and standards of evaluation. Recognizing logical fallacies, such as circular reasoning or false dilemmas, helps maintain intellectual integrity and avoid flawed conclusions.

Evidence evaluation involves assessing the quality, relevance, and sufficiency of information supporting claims or arguments. This process considers source credibility, methodological soundness, contextual factors, and potential limitations while weighing contradictory evidence appropriately.

Problem-solving methodologies typically involve defining problems clearly, generating potential solutions, evaluating alternatives systematically, implementing chosen approaches, and assessing outcomes. This structured approach increases the likelihood of effective resolution while providing opportunities for learning and refinement.

Decision-making processes benefit from critical thinking through thorough consideration of options, consequences, priorities, and uncertainties. Balancing quantitative data with qualitative factors, short-term implications with long-term effects, and individual preferences with broader impacts leads to more robust and defensible choices.

Metacognition, or thinking about one's own thinking, enhances critical thinking by encouraging self-awareness of cognitive processes, biases, and limitations. Regular reflection on reasoning approaches, assumptions made, and potential improvements develops more sophisticated thinking skills over time.

Creative thinking complements critical thinking by generating novel ideas, perspectives, and solutions that may not emerge through purely analytical approaches. The integration of divergent and convergent thinking processes fosters innovation while maintaining evaluative rigor.

Information literacy in digital environments requires skills for locating, evaluating, and using information effectively amid vast quantities of available data. Distinguishing credible sources from questionable ones, recognizing misinformation patterns, and verifying claims through multiple channels are essential contemporary competencies.

Ethical considerations permeate critical thinking processes, requiring attention to fairness, honesty, intellectual humility, and respect for diverse perspectives. Acknowledging limitations in one's own knowledge, remaining open to reconsideration, and engaging respectfully with differing viewpoints strengthen reasoning quality.

Educational approaches to developing critical thinking skills typically involve explicit instruction, modeling, practice with feedback, and real-world application across various disciplines. These methods help internalize thinking habits that transfer beyond academic settings into professional and personal contexts.

The ongoing development of critical thinking represents a lifelong endeavor with personal, professional, and societal benefits. As information environments become increasingly complex and challenges more interconnected, these cognitive skills grow in importance for individual agency and collective wellbeing.`
                ];
                
                // Initialize the application
                this.init();
            }
            
            init() {
                // Set current year in footer
                document.getElementById('currentYear').textContent = new Date().getFullYear();
                
                // Load initial passage
                this.loadRandomPassage();
                
                // Event listeners
                this.typingInput.addEventListener('input', this.handleTyping.bind(this));
                this.typingInput.addEventListener('keydown', this.handleKeyDown.bind(this));
                this.typingInput.addEventListener('paste', (e) => e.preventDefault());
                this.typingInput.addEventListener('copy', (e) => e.preventDefault());
                this.typingInput.addEventListener('cut', (e) => e.preventDefault());
                
                // Tab key to switch focus between passage and typing area
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        e.preventDefault();
                        if (document.activeElement === this.typingInput) {
                            this.passageDisplay.focus();
                        } else {
                            this.typingInput.focus();
                        }
                    }
                });
                
                this.startButton.addEventListener('click', this.startPractice.bind(this));
                this.resetButton.addEventListener('click', this.resetPractice.bind(this));
                this.newPassageButton.addEventListener('click', () => this.loadRandomPassage());
                this.pauseButton.addEventListener('click', this.togglePause.bind(this));
                this.focusTypingBtn.addEventListener('click', () => this.typingInput.focus());
                this.practiceAgainButton.addEventListener('click', this.resetPractice.bind(this));
                this.newPracticeButton.addEventListener('click', () => {
                    this.loadRandomPassage();
                    this.resetPractice();
                });
                
                // Set initial state
                this.updateStatus();
                this.updatePassageDisplay();
                
                // Auto-focus typing area
                setTimeout(() => {
                    this.typingInput.focus();
                }, 500);
            }
            
            loadRandomPassage() {
                // Select a random passage (every time new passage)
                const randomIndex = Math.floor(Math.random() * this.passages.length);
                this.originalPassage = this.passages[randomIndex];
                this.passageChars = this.originalPassage.split('');
                
                // Calculate words (approximate) - should be ~350 words
                const words = this.originalPassage.trim().split(/\s+/).length;
                
                // Update display
                this.totalChars.textContent = this.originalPassage.length;
                this.totalWords.textContent = words;
                this.currentPosition.textContent = `0 / ${this.originalPassage.length}`;
                this.progressPercent.textContent = '0%';
                
                // Reset typing state
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap.clear();
                
                this.updatePassageDisplay();
                this.updateStatus();
                
                // Clear typing input
                this.typingInput.value = '';
                this.typingInput.disabled = false;
                this.typingInput.classList.remove('disabled');
                this.typingInput.focus();
                
                // Hide results
                this.resultsContainer.classList.remove('active');
                
                // Reset timer to 7 minutes
                this.resetTimer();
            }
            
            updatePassageDisplay() {
                let displayHTML = '';
                
                for (let i = 0; i < this.passageChars.length; i++) {
                    let charClass = '';
                    let charContent = this.passageChars[i];
                    
                    // Handle special characters for display
                    if (charContent === ' ') {
                        charContent = ' ';
                    } else if (charContent === '\n') {
                        charContent = '\n';
                    } else if (charContent === '\t') {
                        charContent = '    ';
                    }
                    
                    if (i < this.currentPassageIndex) {
                        // Already typed characters
                        if (this.errorMap.has(i)) {
                            charClass = 'incorrect';
                        } else {
                            charClass = 'correct';
                        }
                    } else if (i === this.currentPassageIndex) {
                        // Current character
                        charClass = 'current';
                    }
                    
                    // Handle newlines specially
                    if (charContent === '\n') {
                        displayHTML += `<br><span class="char ${charClass}"> </span>`;
                    } else {
                        displayHTML += `<span class="char ${charClass}">${this.escapeHtml(charContent)}</span>`;
                    }
                }
                
                this.passageDisplay.innerHTML = displayHTML;
                
                // Scroll current character into view
                const currentChar = this.passageDisplay.querySelector('.char.current');
                if (currentChar) {
                    currentChar.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                }
            }
            
            escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, function(m) { return map[m]; });
            }
            
            handleTyping(e) {
                if (this.isCompleted || this.isPaused) return;
                
                const input = this.typingInput.value;
                const inputLength = input.length;
                
                // Start timer on first keystroke
                if (!this.isRunning && inputLength > 0) {
                    this.startTimer();
                }
                
                // Check if user is trying to type beyond current position
                if (inputLength > this.currentPassageIndex + 1) {
                    // User is trying to type ahead - revert to correct position
                    this.typingInput.value = input.substring(0, this.currentPassageIndex);
                    return;
                }
                
                // Handle backspace
                if (inputLength < this.currentPassageIndex) {
                    // User pressed backspace - move cursor back
                    this.currentPassageIndex = inputLength;
                    this.updatePassageDisplay();
                    this.updateStatus();
                    return;
                }
                
                // Handle new character
                if (inputLength === this.currentPassageIndex + 1) {
                    const typedChar = input[this.currentPassageIndex];
                    const expectedChar = this.passageChars[this.currentPassageIndex];
                    
                    // Strict MSCEIA character comparison
                    let isCorrect = typedChar === expectedChar;
                    
                    // Special handling for Enter key
                    if (typedChar === '\n' && expectedChar !== '\n') {
                        isCorrect = false;
                    }
                    
                    // Update counts
                    this.totalTypedChars++;
                    
                    if (isCorrect) {
                        this.correctChars++;
                        // Remove error if previously marked at this position
                        if (this.errorMap.has(this.currentPassageIndex)) {
                            this.errorMap.delete(this.currentPassageIndex);
                        }
                    } else {
                        this.errors++;
                        // Mark this position as having an error
                        this.errorMap.set(this.currentPassageIndex, {
                            typed: typedChar,
                            expected: expectedChar,
                            time: Date.now()
                        });
                    }
                    
                    this.currentPassageIndex++;
                    
                    // Update progress percentage
                    const progress = this.passageChars.length > 0 ? 
                        Math.round((this.currentPassageIndex / this.passageChars.length) * 100) : 0;
                    this.progressPercent.textContent = `${progress}%`;
                    
                    // Check if passage is completed or time is up
                    if (this.currentPassageIndex >= this.passageChars.length) {
                        this.completePractice();
                    }
                    
                    this.updatePassageDisplay();
                    this.updateStatus();
                }
            }
            
            handleKeyDown(e) {
                // Prevent default for tab key (handled separately)
                if (e.key === 'Tab') {
                    e.preventDefault();
                    return;
                }
                
                // Handle Enter key - only allow at correct positions
                if (e.key === 'Enter') {
                    if (this.currentPassageIndex < this.passageChars.length) {
                        const expectedChar = this.passageChars[this.currentPassageIndex];
                        
                        if (expectedChar !== '\n') {
                            e.preventDefault();
                            // Add error for pressing Enter at wrong position
                            setTimeout(() => {
                                this.errors++;
                                this.errorMap.set(this.currentPassageIndex, {
                                    typed: '\n',
                                    expected: expectedChar,
                                    time: Date.now()
                                });
                                this.updateStatus();
                            }, 0);
                            return;
                        }
                    }
                }
                
                // Allow backspace, delete, arrow keys, etc.
                const allowedKeys = [
                    'Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 
                    'ArrowUp', 'ArrowDown', 'Home', 'End'
                ];
                
                if (allowedKeys.includes(e.key)) {
                    return;
                }
                
                // Prevent typing if practice is completed
                if (this.isCompleted || this.isPaused) {
                    e.preventDefault();
                    return;
                }
            }
            
            startTimer() {
                if (this.isRunning) return;
                
                this.isRunning = true;
                this.startTime = Date.now();
                this.startButton.style.display = 'none';
                this.pauseButton.style.display = 'flex';
                
                this.timerInterval = setInterval(() => {
                    if (!this.isPaused) {
                        this.timeLeft--;
                        
                        if (this.timeLeft <= 0) {
                            this.timeLeft = 0;
                            this.completePractice();
                        }
                        
                        this.updateTimerDisplay();
                        this.updateStatus();
                    }
                }, 1000);
            }
            
            updateTimerDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                
                // Change color based on remaining time
                let timeColor = 'var(--timer-green)';
                if (this.timeLeft < 60) {
                    timeColor = 'var(--timer-red)';
                } else if (this.timeLeft < 180) {
                    timeColor = 'var(--timer-yellow)';
                }
                
                this.timeRemaining.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                this.timeRemaining.style.color = timeColor;
            }
            
            resetTimer() {
                clearInterval(this.timerInterval);
                this.isRunning = false;
                this.isPaused = false;
                this.timeLeft = this.totalTime; // 7 minutes
                this.updateTimerDisplay();
                this.startButton.style.display = 'flex';
                this.pauseButton.style.display = 'none';
                this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
                this.timeRemaining.style.color = 'var(--timer-green)';
            }
            
            togglePause() {
                if (!this.isRunning) return;
                
                this.isPaused = !this.isPaused;
                
                if (this.isPaused) {
                    this.pauseButton.innerHTML = '<i class="fas fa-play"></i> Resume';
                    this.typingInput.disabled = true;
                    this.typingInput.classList.add('disabled');
                } else {
                    this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
                    this.typingInput.disabled = false;
                    this.typingInput.classList.remove('disabled');
                    this.typingInput.focus();
                }
            }
            
            updateStatus() {
                // Calculate elapsed time in minutes
                const elapsedMinutes = this.isRunning ? 
                    ((Date.now() - this.startTime) / 1000 / 60) : 0;
                
                // Calculate Gross WPM (MSCEIA formula: 1 word = 5 characters)
                const grossWPM = elapsedMinutes > 0 ? 
                    (this.totalTypedChars / 5) / elapsedMinutes : 0;
                
                // Calculate Net WPM (Gross WPM - errors per minute)
                const errorsPerMinute = elapsedMinutes > 0 ? this.errors / elapsedMinutes : 0;
                let netWPM = grossWPM - errorsPerMinute;
                netWPM = netWPM < 0 ? 0 : netWPM;
                
                // Calculate Accuracy
                const accuracy = this.totalTypedChars > 0 ? 
                    ((this.totalTypedChars - this.errors) / this.totalTypedChars) * 100 : 100;
                
                // Update status bar
                this.grossWPM.textContent = Math.round(grossWPM);
                this.errorsCount.textContent = this.errors;
                this.accuracyPercent.textContent = `${Math.min(100, Math.round(accuracy))}%`;
                this.currentPosition.textContent = `${this.currentPassageIndex} / ${this.passageChars.length}`;
            }
            
            completePractice() {
                clearInterval(this.timerInterval);
                this.isRunning = false;
                this.isCompleted = true;
                
                // Disable typing input
                this.typingInput.disabled = true;
                this.typingInput.classList.add('disabled');
                
                // Calculate final results
                const elapsedMinutes = this.startTime ? 
                    ((Date.now() - this.startTime) / 1000 / 60) : 0.01; // Avoid division by zero
                
                // Final Gross WPM
                const finalGrossWPM = (this.totalTypedChars / 5) / elapsedMinutes;
                
                // Final Net WPM (MSCEIA formula)
                const errorsPerMinute = this.errors / elapsedMinutes;
                let finalNetWPM = finalGrossWPM - errorsPerMinute;
                finalNetWPM = finalNetWPM < 0 ? 0 : finalNetWPM;
                
                // Final Accuracy
                const finalAccuracy = this.totalTypedChars > 0 ? 
                    ((this.totalTypedChars - this.errors) / this.totalTypedChars) * 100 : 0;
                
                // Update results display
                this.resultGrossWPM.textContent = Math.round(finalGrossWPM);
                this.resultNetWPM.textContent = Math.round(finalNetWPM);
                this.resultErrors.textContent = this.errors;
                this.resultAccuracy.textContent = `${Math.min(100, Math.round(finalAccuracy))}%`;
                this.resultChars.textContent = this.totalTypedChars;
                
                // Show results section
                this.resultsContainer.classList.add('active');
                
                // Scroll to results
                setTimeout(() => {
                    this.resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 500);
            }
            
            resetPractice() {
                // Reset all state
                clearInterval(this.timerInterval);
                
                this.currentPassageIndex = 0;
                this.errors = 0;
                this.startTime = null;
                this.endTime = null;
                this.isRunning = false;
                this.isCompleted = false;
                this.isPaused = false;
                this.totalTypedChars = 0;
                this.correctChars = 0;
                this.errorMap.clear();
                this.timeLeft = this.totalTime; // Reset to 7 minutes
                
                // Reset UI
                this.typingInput.value = '';
                this.typingInput.disabled = false;
                this.typingInput.classList.remove('disabled');
                this.typingInput.focus();
                
                this.startButton.style.display = 'flex';
                this.pauseButton.style.display = 'none';
                this.pauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause';
                this.progressPercent.textContent = '0%';
                
                this.resultsContainer.classList.remove('active');
                
                this.updatePassageDisplay();
                this.updateTimerDisplay();
                this.updateStatus();
            }
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            const typingPractice = new PassageTypingPractice();
            
            // Make it available globally for debugging if needed
            window.typingPractice = typingPractice;
        });
    </script>
</body>
</html>
